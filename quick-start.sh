#!/bin/bash

# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è AWS —Å–µ—Ä–≤–µ—Ä–∞ 13.61.2.249
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./quick-start.sh

set -e

echo "üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è AWS —Å–µ—Ä–≤–µ—Ä–∞ 13.61.2.249"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
echo "üì° –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É..."
if ! ping -c 1 13.61.2.249 &> /dev/null; then
    echo "‚ùå –ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É 13.61.2.249"
    echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω"
    exit 1
fi

echo "‚úÖ –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω!"

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
echo ""
echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –¥–µ–ø–ª–æ—è:"
echo ""
echo "1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:"
echo "   ssh -i your-key.pem ec2-user@13.61.2.249"
echo ""
echo "2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:"
echo "   git clone https://github.com/your-username/party-astro.git"
echo "   cd party-astro"
echo ""
echo "3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Å–µ—Ä–≤–µ—Ä–∞:"
echo "   chmod +x aws-setup.sh"
echo "   ./aws-setup.sh"
echo ""
echo "4. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å —Å–Ω–æ–≤–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:"
echo "   cp env.prod.example .env"
echo "   nano .env  # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏ –∏ email"
echo ""
echo "5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π:"
echo "   chmod +x deploy.sh"
echo "   ./deploy.sh"
echo ""
echo "6. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:"
echo "   https://ec2-13-61-2-249.eu-north-1.compute.amazonaws.com"
echo ""
echo "üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
echo "   # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤"
echo "   docker-compose -f docker-compose.prod.yml logs -f"
echo ""
echo "   # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"
echo "   docker-compose -f docker-compose.prod.yml ps"
echo ""
echo "   # –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞"
echo "   chmod +x backup.sh"
echo "   ./backup.sh"
echo ""
echo "üåê –í–∞—à —Å–µ—Ä–≤–µ—Ä: 13.61.2.249"
echo "üåê AWS DNS: ec2-13-61-2-249.eu-north-1.compute.amazonaws.com"
echo "üåç –†–µ–≥–∏–æ–Ω: eu-north-1 (–°—Ç–æ–∫–≥–æ–ª—å–º)"
