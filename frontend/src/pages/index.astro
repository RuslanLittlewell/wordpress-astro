---
import FAQ from "@/components/MainPage/FAQ.astro";
import HeroSection from "@/components/MainPage/HeroSection.astro";
import HowToPay from "@/components/MainPage/HowToPay.astro";
import MiniCategories from "@/components/MainPage/MiniCategories.astro";
import Recommendations from "@/components/MainPage/Recommendations.astro";
import WhyUs from "@/components/MainPage/WhyUs.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import { wpFetch } from "@/lib/wp";


let data;
try {
  data = await wpFetch(`/acf/v3/pages/10`);
} catch (error) {
  console.warn('Не удалось получить данные главной страницы из WordPress API');
  data = {
    acf: {
      hero_block: {
        title: 'Аренда оборудования для праздников',
        image: '/logo.svg'
      },
      why_us: {
        title: 'Почему выбирают нас',
        points: [
          {
            title: 'Качество',
            description: 'Высокое качество оборудования',
            image: 'logo.svg'
          },
          {
            title: 'Надежность',
            description: 'Надежное обслуживание',
            image: 'logo.svg'
          }
        ]
      },
              req_group: {
          title: 'Рекомендуемые товары',
          recommendations: []
        },
      seo: {
        keywords: 'аренда, праздники, оборудование',
        short_description: 'Аренда оборудования для праздников в Гродно'
      },
      faq: {
        title: 'Часто задаваемые вопросы',
        points: [
          {
            question: 'Как заказать оборудование?',
            answer: 'Свяжитесь с нами по телефону или через форму на сайте.'
          },
          {
            question: 'Какие условия аренды?',
            answer: 'Подробные условия аренды указаны в договоре.'
          }
        ]
      }
    }
  };
}

const { acf: pageDdata } = data;
const { hero_block, why_us, req_group, seo, faq } = pageDdata;
---

<BaseLayout
  title={hero_block.title}
  image={hero_block.image}
  keywords={seo.keywords}
  description={seo.short_description}
>
  <HeroSection data={hero_block} />
  <MiniCategories />
  <WhyUs data={why_us} />
  <Recommendations data={req_group} />
  <!-- <HowToPay /> -->
  <FAQ  data={faq}/>
</BaseLayout>
