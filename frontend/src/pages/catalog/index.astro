---
import CategoryCard from "@/components/Catalog/CategoryCard.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
import Container from "@/layouts/Container.astro";
import { wpFetch } from "@/lib/wp";

let categories;
try {
  categories = await wpFetch('/wp/v2/inv-cat');
} catch (error) {
  console.warn('Не удалось получить категории из WordPress API');
  categories = [
    {
      id: 1,
      name: 'Категория по умолчанию',
      slug: 'default',
      description: 'Описание категории'
    }
  ];
}
---

<BaseLayout title="Каталог">
  <Container class:list="mt-32 mb-16 bg-zinc-50">
    <h1 class="mb-8 text-4xl font-bold">Каталог</h1>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {
        categories.map((category: any) => (
         <CategoryCard category={category} />
        ))
      }
    </div>
  </Container>
</BaseLayout>
